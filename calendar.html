<?php session_start();?>
<!DOCTYPE html>
    <html lang=en>
        <head>
            <title>Welcome to Your Calendar</title>
            <link rel="stylesheet" type="text/css" href="cal.css">
            	<script type="text/javascript" src="http://classes.engineering.wustl.edu/cse330/content/calendar.min.js"></script>
				<script type="text/javascript">
					document.addEventListener("DOMContentLoaded",function(){
						  // get the reference for the body
						  var body = document.getElementsByTagName("body")[0];
						  document.getElementById("monthNameTag").innerHTML=currentMonth;
						  // creates a <table> element and a <tbody> element
						  var calendargrid     = document.createElement("table");
						  calendargrid.setAttribute("id","grid");
						  var calendargridHead = document.createElement("thead");
						  var calendargridBody = document.createElement("tbody");
						 
						  // creating all cells
						  for (var i = -1; i < currentMonth.getWeeks().length; i++) {
						    // creates a table row
						    var row = document.createElement("tr");
						 
						    for (var j = 0; j < 7; j++) {
						      if(i==-1){
						       var cell = document.createElement("td");
						      if(j==0){
						        var cellText = document.createTextNode("Sunday");
						      }
						      if(j==1){
						       var cellText = document.createTextNode("Monday");
						      }
						      if(j==2){
						       var cellText = document.createTextNode("Tuesday");
						      }
						      if(j==3){
						       var cellText = document.createTextNode("Wednesday");
						      }
						      if(j==4){
						       var cellText = document.createTextNode("Thursday");
						      }
						      if(j==5){
						        var cellText = document.createTextNode("Friday");
						      }
						      if(j==6){
						        var cellText = document.createTextNode("Saturday");
						      }
						      cell.appendChild(cellText);
						      row.appendChild(cell);
						      }
						      else{
						      // Create a <td> element and a text node, make the text
						      // node the contents of the <td>, and put the <td> at
						      // the end of the table row
						      var cell = document.createElement("td");
						      var weeks = currentMonth.getWeeks();
							  var days = weeks[i].getDates();
								 	var cellText = document.createTextNode(days[j].getDate());
						 	   		cell.appendChild(cellText);
						 	    	row.appendChild(cell);
						  
						      }
						    }
						 
						    // add the row to the end of the table body
						    calendargridBody.appendChild(row);
						  }
						 
						  // put the <tbody> in the <table>
						  calendargrid.appendChild(calendargridBody);
						  // appends <table> into <body>
						  body.appendChild(calendargrid);
						  // sets the border attribute of calendargrid to 3;
						  calendargrid.setAttribute("border", "3");
						}, false);

					// For our purposes, we can keep the current month in a variable in the global scope
					var currentMonth = new Month(2014, 9); // October 2014
					//firstday = new Day(2014, 9, 1);
					// Change the month when the "next month" button is pressed
					document.addEventListener("DOMContentLoaded",function(){
					document.getElementById("nextmonth").addEventListener("click", function(event){
						currentMonth = currentMonth.nextMonth();
						updateCalendar(); // Whenever the month is updated, we'll need to re-render the calendar in HTML
						alert("The new month is "+currentMonth.month+" "+currentMonth.year);
					}, false);
					//change the month when the previous month button is pressed
					document.getElementById("prevmonth").addEventListener("click", function(event){
						currentMonth = currentMonth.prevMonth();
						updateCalendar(); // Whenever the month is updated, we'll need to re-render the calendar in HTML
						alert("The new month is "+currentMonth.month+" "+currentMonth.year);
					}, false);

					//If a box is clicked on, give the option to add an event
					function clickCell(e) {
					    var rows = document.getElementById('calendargrid').rows;
					    for(var i = 0; i < rows.length; i++) {
					        
					    }
					    
					}



					}, false);
					// This updateCalendar() function only alerts the dates in the currently specified month.  You need to write
					// it to modify the DOM (optionally using jQuery) to display the days and weeks in the current month.
					function updateCalendar(){

						var weeks = currentMonth.getWeeks();
					 	
						for(var w in weeks){
							var days = weeks[w].getDates();
							// days contains normal JavaScript Date objects.
					 		//Here is where we want to set the date for each cell's text node
							alert("Week starting on "+days[0]);
							for(var d in days){
								// You can see console.log() output in your JavaScript debugging tool, like Firebug,
								// WebWit Inspector, or Dragonfly.
								//console.log(days[d].toISOString());
							}
						}

						  // get the reference for the body
						 var body = document.getElementsByTagName("body")[0];
						//if there is already a calendar grid there, remove it
						 if (document.getElementById("grid")) document.getElementById("grid").remove();

						  // creates a <table> element and a <tbody> element
						  var calendargrid     = document.createElement("table");
						  var calendargridHead = document.createElement("thead");
						  var calendargridBody = document.createElement("tbody");
						  var weeks = currentMonth.getWeeks();
						  document.getElementById("monthNameTag").innerHTML=currentMonth;			
						  // creating all cells based on the number of weeks
						  for (var i = -1; i < weeks.length; i++) {
						    // creates a table row
						    var row = document.createElement("tr");
						 	
						    for (var j = 0; j < 7; j++) {
						      if(i==-1){
						       var cell = document.createElement("td");
						      if(j==0){
						        var cellText = document.createTextNode("Sunday");
						      }
						      if(j==1){
						       var cellText = document.createTextNode("Monday");
						      }
						      if(j==2){
						       var cellText = document.createTextNode("Tuesday");
						      }
						      if(j==3){
						       var cellText = document.createTextNode("Wednesday");
						      }
						      if(j==4){
						       var cellText = document.createTextNode("Thursday");
						      }
						      if(j==5){
						        var cellText = document.createTextNode("Friday");
						      }
						      if(j==6){
						        var cellText = document.createTextNode("Saturday");
						      }
						      cell.appendChild(cellText);
						      row.appendChild(cell);
						      }
						      else{
						      // Create a <td> element and a text node, make the text
						      // node the contents of the <td>, and put the <td> at
						      // the end of the table row
						      var cell = document.createElement("td");
							  var days = weeks[i].getDates();
								 	var cellText = document.createTextNode(days[j].getDate());
						 	   		cell.appendChild(cellText);
						 	    	row.appendChild(cell);
						  
						      }
						    }
						 
						    // add the row to the end of the table body
						    calendargridBody.appendChild(row);
						  }
						 
						  // put the <tbody> in the <table>
						  calendargrid.appendChild(calendargridBody);
						  // appends <table> into <body>
						  body.appendChild(calendargrid);
						  // sets the border attribute of calendargrid to 3;
						  calendargrid.setAttribute("border", "3");
					}
				</script>
        </head>
        <body>
        <div class="main">	
		<div class="logoutbtn">
			<form method="post" action="logout.php">
				<label class="logout">
				<input type="submit" id="logout" value="log out">
				</label>
			</form>
		</div>
		<div class = "monthbuttons">
			<input type = "submit" id = "prevmonth" value="Previous Month">
			<input type = "submit" id = "nextmonth" value="Next Month">
		</div>
		<p id="instructions">Click on a date below to add an event</p>
		<p id="monthNameTag"></p>
	</div>
		</body>	
	</html>	